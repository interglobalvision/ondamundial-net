{"version":3,"sources":["main.js"],"names":["Site","mobileThreshold","init","_this","this","$","window","resize","onResize","document","ready","Player","Overlay","Programacion","StreamChecker","Earth","fixWidows","each","string","html","replace","triggerEvent","eventName","detail","customEvent","CustomEvent","dispatchEvent","activeNavItem","desktopWidth","pageOverlay","getElementsByClassName","header","getElementById","mobileToggle","mobileMenu","pageOpen","desktopPageClose","bindClicks","addEventListener","toggleMobile","bind","i","length","openPage","closePage","toggleOverlay","body","classList","contains","remove","add","querySelector","event","pageName","target","getAttribute","activePage","activeDesktopNavItem","clientWidth","eventsPosts","JSON","parse","WP","programacionEvents","scheduleArray","programacionContainer","fillEventsObject","addEventsToDom","forEach","scheduleEvent","eventMoment","moment","unix","parseInt","timestamp","year","format","month","monthNum","day","dayNum","hour","undefined","months","days","events","push","title","content","scheduleHTML","yearIndex","yearContent","createElement","innerText","makeEventsRow","monthIndex","monthContent","dayIndex","dayContent","eventObj","eventIndex","eventContent","className","innerHTML","container","id","rowContent","newRow","appendChild","canvasWidth","canvasHeight","textureUrl","themeUrl","initialCameraZ","animate","camera","THREE","PerspectiveCamera","innerHeight","position","z","scene","Scene","group","Group","loadTexture","canvas","width","height","renderCanvas","texture","CanvasTexture","geometry","PlaneBufferGeometry","material","MeshBasicMaterial","map","overdraw","mesh","Mesh","y","rotation","x","Math","PI","renderer","CanvasRenderer","alpha","setClearColor","setPixelRatio","devicePixelRatio","setSize","domElement","TextureLoader","load","SphereGeometry","requestAnimationFrame","renderScene","lookAt","audioValue","getAnalyserValue","render","aspect","updateProjectionMatrix","statusUrl","statusCheckInterval","streamData","startChecker","checkStreamStatus","setInterval","getJSON","data","status","fail","console","log","neverPlayed","fadeTime","fftSize","freqBand","streamUrl","volumeIncrement","playerContainer","playerElement","playerSrc","playButton","pauseButton","streamStatusText","nowPlayingText","handleOnlineStream","handleCanplay","handleOfflineStream","play","pause","setupAudioProcessing","audioContext","AudioContext","webkitAudioContext","audioSource","createMediaElementSource","audioAnalyser","createAnalyser","smoothingTimeConstant","analyserData","Uint8Array","frequencyBinCount","connect","destination","current_track","src","crossOrigin","buildMarqueeContent","defineMarqueeKeyframes","playMarquee","marqueeText","marqueeHolder","marqueeWidth","offsetWidth","marqueeTextElem","nowPlayingWidth","intoWindow","round","marqueeContent","keyframe","define","name","from","transform","to","left","playKeyframe","duration","timingFunction","iterationCount","delay","getByteTimeDomainData","returnAnalysisValue","networkState","volume","paused","fadeInterval","newVolume","clearInterval"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, jQuery, document, Site, Modernizr, moment, WP, THREE*/\n\nSite = {\n  mobileThreshold: 601,\n  init: function() {\n    var _this = this;\n\n    $(window).resize(function() {\n      _this.onResize();\n    });\n\n    $(document).ready(function () {\n      Site.Player.init();\n      Site.Overlay.init();\n      //Site.Earth.init();\n      Site.Programacion.init();\n    });\n\n    Site.StreamChecker.init();\n  },\n\n  onResize: function() {\n    var _this = this;\n\n    Site.Earth.onResize();\n    Site.Overlay.onResize();\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function() {\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n\n  triggerEvent: function(eventName, detail) {\n    var _this =  this;\n\n    var customEvent = new CustomEvent(eventName, {\n      detail: detail,\n    });\n\n    document.dispatchEvent(customEvent);\n  },\n};\n\nSite.Overlay = {\n  activeNavItem: null,\n  desktopWidth: 1024,\n\n  init: function() {\n    var _this = this;\n\n    // GET! ALL THE THINGS!\n    _this.pageOverlay = document.getElementsByClassName('page-overlay');\n\n    _this.header = document.getElementById('header');\n\n    _this.mobileToggle = document.getElementById('mobile-overlay-toggle');\n    _this.mobileMenu = document.getElementById('mobile-menu');\n\n    _this.pageOpen = document.getElementsByClassName('js-page-open');\n\n    _this.desktopPageClose = document.getElementsByClassName('desktop-page-close');\n\n    // BIND CLICKS!\n    _this.bindClicks();\n  },\n\n  bindClicks: function() {\n    var _this = this;\n\n    // bind the mobile toggle clicks!\n    _this.mobileToggle.addEventListener('click', _this.toggleMobile.bind(_this));\n\n    for (var i = 0; i < _this.pageOpen.length; i++) {\n      // bind the page nav item clicks!\n      _this.pageOpen[i].addEventListener('click', _this.openPage.bind(_this));\n    }\n\n    for (var i = 0; i < _this.desktopPageClose.length; i++) {\n      // bind the desktop page close X clicks!\n      _this.desktopPageClose[i].addEventListener('click', _this.closePage.bind(_this));\n    }\n  },\n\n  toggleOverlay: function() {\n    var _this = this;\n\n    if (document.body.classList.contains('overlay-active')) {\n      // if the overlay is showing: hide it\n      document.body.classList.remove('overlay-active');\n    } else {\n      // otherwise: show it\n      document.body.classList.add('overlay-active');\n    }\n\n  },\n\n  toggleMobile: function() {\n    var _this = this;\n\n    // on mobile, the same button closes pages,\n    // and also toggles the mobile menu\n\n    // if there is a page open\n    if (document.querySelector('.page-active') !== null) {\n      // close it\n      _this.closePage();\n      // and hide the overlay\n      _this.toggleOverlay();\n\n    // otherwise, we're toggling the menu\n    } else {\n\n      // if the menu is open\n      if (_this.mobileMenu.classList.contains('active')) {\n        // close it\n        _this.mobileMenu.classList.remove('active');\n      } else {\n        // otherwise, open it\n        _this.mobileMenu.classList.add('active');\n      }\n    }\n\n    // and finally, hide or show the overlay\n    _this.toggleOverlay();\n  },\n\n  openPage: function(event) {\n    var _this = this;\n\n    // get the page name from the\n    // clicked <a> data-page attribute\n    var pageName = event.target.getAttribute('data-page');\n\n    // find the page container with that ID\n    _this.activePage = document.getElementById('page-' + pageName);\n    // open the page!\n    _this.activePage.classList.add('page-active');\n\n    // set the <li> parent of the target <a>\n    // as the active nav item. this displays\n    // in the header as our page title\n    _this.activeDesktopNavItem = document.getElementById('desktop-nav-' + pageName);;\n    _this.activeDesktopNavItem.classList.add('active');\n\n    // if the mobile menu is active, we know this\n    // click was on a mobile nav item, and we know\n    // the overlay is already active\n    if (_this.mobileMenu.classList.contains('active')) {\n      // hide the menu\n      _this.mobileMenu.classList.remove('active');\n    } else {\n      // otherwise it was a desktop nav item, so\n      // we need to show the overlay\n      _this.toggleOverlay();\n    }\n  },\n\n  closePage: function() {\n    var _this = this;\n\n    // unset the active <li> nav item\n    _this.activeDesktopNavItem.classList.remove('active');\n\n    // hide the active page\n    _this.activePage.classList.remove('page-active');\n\n    // hide the overlay\n    _this.toggleOverlay();\n  },\n\n  onResize: function() {\n    var _this = this;\n    var windowWidth = document.body.clientWidth;\n\n    // if we're on desktop size\n    // and the mobile menu is active\n    if (windowWidth >= _this.desktopWidth && _this.mobileMenu.classList.contains('active')) {\n      // hide the menu\n      _this.mobileMenu.classList.remove('active');\n      // and hide the overlay\n      _this.toggleOverlay();\n    }\n  }\n};\n\nSite.Programacion = {\n  // parse JSON event posts object from Wordpress\n  eventsPosts: JSON.parse(WP.programacionEvents),\n  scheduleArray: [],\n  init: function() {\n    var _this = this;\n\n    // Set programacion container\n    _this.programacionContainer =  document.getElementById('page-programacion');\n\n    // Loop through Years -> Months -> Days -> Events\n    _this.fillEventsObject();\n\n    // Add schedule to DOM\n    _this.addEventsToDom();\n  },\n\n  fillEventsObject: function() {\n    var _this = this;\n\n    // Iterate thru each event\n    _this.eventsPosts.forEach(function(scheduleEvent) {\n      // Generate moment from timestamp in user local timezone\n      var eventMoment = moment.unix(parseInt(scheduleEvent.timestamp));\n\n      // Parse date/time data\n      var year = eventMoment.format('YYYY');\n      var month = eventMoment.format('MMMM');\n      var monthNum = eventMoment.format('M');\n      var day = eventMoment.format('dddd Do');\n      var dayNum = eventMoment.format('D');\n      var hour = eventMoment.format('H:mm');\n\n      // Create this Year object if missing in schedule array\n      if (_this.scheduleArray[year] === undefined) {\n        _this.scheduleArray[year] = {\n          year: year,\n          months: []\n        };\n      }\n\n      // Create this Month object if missing in Year\n      if (_this.scheduleArray[year].months[monthNum] === undefined) {\n        _this.scheduleArray[year].months[monthNum] = {\n          month: month,\n          days: []\n        };\n      }\n\n      // Create this Day object if missing in Month\n      if (_this.scheduleArray[year].months[monthNum].days[dayNum] === undefined) {\n        _this.scheduleArray[year].months[monthNum].days[dayNum] = {\n          day: day,\n          events: []\n        };\n      }\n\n      // Push Event object to events array\n      _this.scheduleArray[year].months[monthNum].days[dayNum].events.push({\n        hour: hour,\n        title: scheduleEvent.title,\n        content: scheduleEvent.content\n      });\n    });\n  },\n\n  addEventsToDom: function() {\n    var _this = this;\n    var scheduleHTML = '';\n\n    // Make Years\n    _this.scheduleArray.forEach(function(year, yearIndex) {\n\n      // create content element\n      var yearContent = document.createElement('h3');\n      // fill with year\n      yearContent.innerText = year.year;\n\n      // add Year row to HTML\n      scheduleHTML += _this.makeEventsRow(\n        // parent element\n        _this.programacionContainer,\n        // row id\n        yearIndex,\n        // row content\n        yearContent\n      );\n\n      // Make Months\n      year.months.forEach(function(month, monthIndex) {\n\n        // create content element\n        var monthContent = document.createElement('h3');\n        // fill with month\n        monthContent.innerText = month.month;\n\n        // make Month row\n        _this.makeEventsRow(\n          document.getElementById(yearIndex),\n          yearIndex + '-' + monthIndex,\n          monthContent\n        );\n\n        // Make Days\n        month.days.forEach(function(day, dayIndex) {\n\n          // create content element\n          var dayContent = document.createElement('h3');\n          // fill with day\n          dayContent.innerText = day.day;\n\n          // make Day row\n          _this.makeEventsRow(\n            document.getElementById(yearIndex + '-' + monthIndex),\n            yearIndex + '-' + monthIndex + '-' + dayIndex,\n            dayContent\n          );\n\n          // Make Events\n          day.events.forEach(function(eventObj, eventIndex) {\n\n            // create content element\n            var eventContent = document.createElement('div');\n            // set element element class\n            eventContent.className = 'programacion-event';\n            // fill with event info\n            eventContent.innerHTML = '<div class=\"programacion-event-hour\">' + eventObj.hour + '</div><div class=\"programacion-event-info\"><h2>' + eventObj.title + '</h2>' + eventObj.content;\n\n            // make Event row\n            _this.makeEventsRow(\n              document.getElementById(yearIndex + '-' + monthIndex + '-' + dayIndex),\n              yearIndex + '-' + monthIndex + '-' + dayIndex + '-' + eventIndex,\n              eventContent\n            );\n\n          });\n\n        });\n\n      });\n\n    });\n  },\n\n  // Generate DOM for an events row and append it:\n  // <div id={id} class=\"programacion-row\">\n  //   {rowContent}\n  // </div>\n  makeEventsRow: function(container, id, rowContent) {\n    var _this = this;\n\n    // Create row element\n    var newRow = document.createElement('div');\n\n    // Set attributes\n    newRow.id = id;\n    newRow.className = 'programacion-row';\n    newRow.appendChild(rowContent);\n\n    // Append row to container\n    container.appendChild(newRow);\n  }\n};\n\nSite.Earth = {\n  canvasWidth: 128,\n  canvasHeight: 128,\n  textureUrl: WP.themeUrl + '/dist/img/earth_texture.jpg',\n  initialCameraZ: 1000,\n  init: function() {\n    var _this = this;\n\n    // Bind Animate function\n    _this.animate = _this.animate.bind(_this);\n\n    _this.container = document.getElementById('earth-container');\n\n    // -- Set Three stuff\n\n    // Set camera\n    _this.camera = new THREE.PerspectiveCamera( 60, document.body.clientWidth / window.innerHeight, 1, 2000 );\n    _this.camera.position.z = _this.initialCameraZ;\n\n    // Set Scene\n    _this.scene = new THREE.Scene();\n\n    // Set Group\n    _this.group = new THREE.Group();\n\n    // Add Group to the scene\n    _this.scene.add( _this.group );\n\n    // Load earth texture\n    _this.loadTexture();\n\n    // Create canvas element\n    _this.canvas = document.createElement( 'canvas' );\n\n    // Set Canvas size\n    _this.canvas.width = _this.canvasWidth;\n    _this.canvas.height = _this.canvasHeight;\n\n    // Render canvas\n    _this.renderCanvas();\n\n    // Animate\n    _this.animate();\n  },\n\n  renderCanvas: function() {\n    var _this = this;\n\n    var texture = new THREE.CanvasTexture( _this.canvas );\n    var geometry = new THREE.PlaneBufferGeometry( 300, 300, 3, 3 );\n    var material = new THREE.MeshBasicMaterial( { map: texture, overdraw: 0.5 } );\n    var mesh = new THREE.Mesh( geometry, material );\n\n    mesh.position.y = - 250;\n    mesh.rotation.x = - Math.PI / 2;\n    _this.group.add( mesh );\n\n    _this.renderer = new THREE.CanvasRenderer({ alpha: true });\n    _this.renderer.setClearColor( 0x000000, 0 );\n    _this.renderer.setPixelRatio( window.devicePixelRatio );\n    _this.renderer.setSize( document.body.clientWidth, window.innerHeight );\n    _this.container.appendChild( _this.renderer.domElement );\n  },\n\n  loadTexture: function() {\n    var _this = this;\n\n    var loader = new THREE.TextureLoader();\n\n    loader.load(_this.textureUrl, function (texture) {\n      var geometry = new THREE.SphereGeometry( 200, 20, 20 );\n      var material = new THREE.MeshBasicMaterial( { map: texture, overdraw: 0.5 } );\n      var mesh = new THREE.Mesh( geometry, material );\n      _this.group.add( mesh );\n    });\n  },\n\n  animate: function() {\n    var _this = this;\n\n    window.requestAnimationFrame(_this.animate);\n\n    _this.renderScene();\n  },\n\n  renderScene: function() {\n    var _this = this;\n\n    _this.camera.lookAt( _this.scene.position );\n    _this.group.rotation.y -= 0.005;\n\n    // Get analyser audio value\n    // The value goes from 0 to 1\n    var audioValue = Site.Player.getAnalyserValue();\n\n    // because the larger Z is the smaller the globe is\n    // we need turn the value to be from 1 to 0\n    audioValue = 1 - audioValue;\n\n    // Set new camera z position\n    _this.camera.position.z = audioValue * _this.initialCameraZ;\n\n    // Re-render scene\n    _this.renderer.render( _this.scene, _this.camera );\n\n  },\n\n  onResize: function() {\n    var _this = this;\n\n    _this.camera.aspect = document.body.clientWidth / window.innerHeight;\n    _this.camera.updateProjectionMatrix();\n    _this.renderer.setSize( document.body.clientWidth, window.innerHeight );\n  }\n};\n\nSite.StreamChecker = {\n  statusUrl: 'https://public.radio.co/stations/s0b5e9c02c/status',\n  statusCheckInterval: 5000,\n  streamData: null,\n  init: function() {\n    var _this = this;\n\n    _this.startChecker();\n  },\n\n  startChecker: function() {\n    var _this = this;\n\n\n    _this.checkStreamStatus();\n\n    // Start checker on an interval\n    setInterval(function() {\n      _this.checkStreamStatus();\n    }, _this.statusCheckInterval);\n  },\n\n  // Check the stream status thru ajax and change the player accordingly\n  checkStreamStatus: function() {\n    var _this = this;\n\n    // Make the ajax request\n    $.getJSON(_this.statusUrl, function(data) {\n\n      // Save data in a cache var, just in case\n      _this.streamData = data.status;\n\n      // Check if the stream is offline\n      if (data.status === 'offline') {\n\n        // Trigger the event\n        Site.triggerEvent('streamoffline', data);\n\n      } else if (data.status === 'online')  {  // else  (stream is online)\n\n        // Trigger the event\n        Site.triggerEvent('streamonline', data);\n      }\n    })\n    .fail( function() {\n      // Trigger the event\n      Site.triggerEvent('streamoffline');\n\n      console.log('Radio.co seems to be unresponsive');\n\n    });\n\n  },\n\n};\n\nSite.Player = {\n  neverPlayed: true,\n  fadeTime:  2000,\n  fftSize: 32,\n  freqBand: 1,\n  streamUrl: 'http://streaming.radio.co/s0b5e9c02c/listen',\n  streamData: {},\n  init: function() {\n    var _this = this;\n\n    // Calculate the volume increment\n    _this.volumeIncrement = 1 / (_this.fadeTime / 50);\n\n    // Player DOM elements\n    _this.playerContainer =  document.getElementById('player-container');\n    _this.playerElement =  document.getElementById('player');\n    _this.playerSrc =  document.getElementById('player-src');\n    _this.playButton =  document.getElementById('play-button');\n    _this.pauseButton =  document.getElementById('pause-button');\n    _this.streamStatusText =  document.getElementById('stream-status');\n    _this.nowPlayingText =  document.getElementById('now-playing');\n\n    // Bind event handlers\n    _this.handleOnlineStream = _this.handleOnlineStream.bind(_this);\n    _this.handleCanplay = _this.handleCanplay.bind(_this);\n    _this.handleOfflineStream = _this.handleOfflineStream.bind(_this);\n\n    // Subscribe to stream events\n    document.addEventListener('streamonline', _this.handleOnlineStream);\n    document.addEventListener('streamoffline', _this.handleOfflineStream);\n\n    // Subscribe to clic on player controls\n    _this.playButton.addEventListener('click', _this.play.bind(_this));\n    _this.pauseButton.addEventListener('click', _this.pause.bind(_this));\n  },\n\n  /*\n   * Setup all web audio stuff.\n   */\n  setupAudioProcessing: function() {\n    var _this = this;\n\n    // Set Audio Context\n    _this.audioContext = new (window.AudioContext || window.webkitAudioContext)();\n\n    // Create audio source from <audio>\n    _this.audioSource = _this.audioContext.createMediaElementSource(_this.playerElement);\n\n    // Create analyser node\n    _this.audioAnalyser = _this.audioContext.createAnalyser();\n\n    // Set analyser settings\n    _this.audioAnalyser.fftSize = _this.fftSize;\n    /*\n    _this.audioAnalyser.minDecibels = -90;\n    _this.audioAnalyser.maxDecibels = -10;\n    */\n    _this.audioAnalyser.smoothingTimeConstant = 1;\n\n    // Init the anaylser data array\n    _this.analyserData = new Uint8Array(_this.audioAnalyser.frequencyBinCount);\n\n    // Conect Source to Analyser\n    _this.audioSource.connect(_this.audioAnalyser);\n\n    // Conect Analyser to destination. connectin to destination triggers the audio\n    _this.audioAnalyser.connect(_this.audioContext.destination);\n\n  },\n\n  handleOnlineStream: function(event) {\n    var _this = this;\n\n    if (typeof _this.streamData.current_track === 'undefined' || event.detail.current_track.title !== _this.streamData.current_track.title) {\n\n      _this.streamData = event.detail;\n\n      // Add class `online` to the player container\n      _this.playerContainer.classList.add('online');\n\n      // Check if player src is empty\n      if (_this.playerSrc.src === '') {\n\n        // Add src\n        _this.playerSrc.src = _this.streamUrl;\n\n        // Disable player CORS restriction\n        _this.playerElement.crossOrigin = 'anonymous';\n\n        // Load src\n        _this.playerElement.load();\n\n      }\n\n      // Update player status\n      _this.streamStatusText.innerHTML = 'Ahora: ';\n\n      // We subscribe to the `canplay` event from the player\n      _this.playerElement.addEventListener('canplay', _this.handleCanplay);\n\n      // Update marquee text\n      _this.buildMarqueeContent(_this.streamData.current_track.title);\n      _this.defineMarqueeKeyframes();\n      _this.playMarquee();\n    }\n  },\n\n  buildMarqueeContent: function(marqueeText) {\n    var _this = this;\n\n    var marqueeHolder = document.getElementById('now-playing-marquee-holder');\n    var marqueeWidth = marqueeHolder.offsetWidth;\n\n    var marqueeTextElem = '<span class=\"now-playing-text\">' + marqueeText + '</span>';\n\n    _this.nowPlayingText.innerHTML = marqueeTextElem;\n\n    var nowPlayingWidth = _this.nowPlayingText.offsetWidth;\n\n    // how many times does marquee text go fit into marquee width\n    var intoWindow = Math.round( marqueeWidth / nowPlayingWidth );\n\n    var marqueeContent = '<span class=\"now-playing-text-holder\">';\n\n    // repeat content for 4 times marquee width\n    for (var i = 0; i < (intoWindow * 4); i++) {\n      marqueeContent = marqueeContent + marqueeTextElem;\n    }\n\n    // add content to marquee\n    _this.nowPlayingText.innerHTML = marqueeContent + '</span>';\n  },\n\n  defineMarqueeKeyframes: function() {\n    $.keyframe.define([{\n      name: 'marquee',\n      from: {\n        'transform' : 'translateX(-25%)'\n      },\n      to: {\n        'left' : 'translateX(25%)'\n      }\n    }]);\n  },\n\n  playMarquee: function() {\n    var $nowPlaying = $('#now-playing-marquee');\n\n    $nowPlaying.playKeyframe({\n      name: 'marquee',\n      duration: '10s',\n      timingFunction: 'linear',\n      iterationCount: 'infinite',\n      delay: '0s'\n    });\n\n  },\n\n  handleCanplay: function(event) {\n    var _this = this;\n\n    // If the player has never started playing\n    if (_this.neverPlayed) {\n\n      // Play the player\n      _this.play();\n\n      // Setup Audio processing\n      _this.setupAudioProcessing();\n\n    }\n\n  },\n\n  // Returns analyser data\n  getAnalyserValue: function() {\n    var _this = this;\n\n    // If the audioContext is not defined we return 128 which is equal to no-sound\n    if(_this.audioContext === undefined) {\n      return 128;\n    }\n\n    // Pass anlyser data to _this.analyserData\n    _this.audioAnalyser.getByteTimeDomainData(_this.analyserData);\n\n    // Get analysis value\n    // Our return values here range from 0 - 256.\n    // Because it is a waveform, 0 and 256 are both full sound\n    // on the wave, and the midpoint 128 is full silence.\n    // We can think of it as a range from -1 - 1, with 128 at the 0 point.\n    var returnAnalysisValue = _this.analyserData[_this.freqBand];\n\n    // Here we invert values from 128 (silence) - 0 (sound), to become\n    // 0 (silence) - 128 (sound)\n    if (returnAnalysisValue < 128) {\n      returnAnalysisValue = 128 - returnAnalysisValue;\n    // or subtract 128 from values 128 - 256\n    // to get 0 (silence) - 128 (sound)\n    } else {\n      returnAnalysisValue -= 128;\n    }\n\n    // Make returnAnalysisValue be in the range of  0 - 1\n    returnAnalysisValue = returnAnalysisValue / 128;\n\n    return returnAnalysisValue;\n\n  },\n\n  handleOfflineStream: function() {\n    var _this = this;\n\n    // Remove `online` class from the player container\n    _this.playerContainer.classList.remove('online');\n\n    // Update marquee status\n    _this.streamStatusText.innerHTML = 'Siguiente: ';\n\n    // Update the marquee text\n    _this.nowPlayingText.innerHTML = 'the upcoming show that has to be requested thru ajax';\n\n    // Pause the player\n    _this.pause();\n  },\n\n  play: function() {\n    var _this = this;\n\n    if (_this.playerElement.networkState !== 3) {\n\n      // Reset volume\n      _this.playerElement.volume = 0;\n\n      if( _this.playerElement.paused) {\n\n        // Play audio element\n        _this.playerElement.play();\n\n      }\n\n      // Add `playing` class to player container\n      _this.playerContainer.classList.add('playing');\n\n      _this.neverPlayed = false;\n\n      // Fade in the volume\n      var fadeInterval = setInterval( function() {\n        var newVolume = _this.playerElement.volume + _this.volumeIncrement;\n\n        if (newVolume > 1) {\n          newVolume = 1;\n        }\n\n        _this.playerElement.volume = newVolume;\n\n        if (_this.playerElement.volume >= 1) {\n          // Clear the interval\n          clearInterval(fadeInterval);\n\n        }\n      }, 50);\n    }\n  },\n\n  pause: function() {\n    var _this = this;\n\n    // Mute the player instead of pause to keep the stream in sync\n    // because pause doesn't exist in live radio\n    _this.playerElement.volume = 0;\n\n    // Remove `playing` class from the player container\n    _this.playerContainer.classList.remove('playing');\n  },\n};\n\nSite.init();\n"]}